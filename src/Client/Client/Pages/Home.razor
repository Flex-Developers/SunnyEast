@page "/"
@using Application.Contract.ProductCategory.Responses
@using Application.Contract.Shops.Responses
@using Client.Infrastructure.Services.Category
@using Client.Infrastructure.Services.Shop
@inject IShopService ShopService
@inject IJSRuntime JS
@inject ICategoryService CategoryService

<div class="homepage-full-width-carousel-container">
    <MudContainer MaxWidth="MaxWidth.False" Gutters="false"
                  Style="margin-top: -80px; padding-left: 0; padding-right: 0">
        <!-- Верхний баннер с слайдером -->
        <MudCarousel TData="string" Class="homepage-carousel-banner" ItemsSource="@Slides"
                     EnableSwipeGesture="true"
                     AutoCycle="true"
                     ShowArrows="true"
                     ArrowsPosition="Position.Center"
                     BulletsPosition="Position.Bottom"
                     BulletsColor="Color.Dark"
                     Context="imgContext">
            <ItemTemplate>
                <MudImage Src="@imgContext" Class="homepage-carousel-image" ObjectFit="ObjectFit.Cover"></MudImage>
            </ItemTemplate>
        </MudCarousel>
    </MudContainer>
</div>

<!-- Анимированный контент -->
<MudContainer Class="homepage-animated-content">

    <!-- Добро пожаловать секция -->
    <div class="homepage-welcome-section homepage-fade-in-up" style="margin-top: 30px;">
        <div class="homepage-welcome-content">
            <MudText Typo="Typo.h2" Align="Align.Center" Class="homepage-welcome-title gradient-text">
                Добро пожаловать в Солнечный Восток
            </MudText>
            <MudText Typo="Typo.h6" Align="Align.Center" Class="homepage-welcome-subtitle"
                     Style="margin-top: 20px; opacity: 0.8; max-width: 800px; margin-left: auto; margin-right: auto;">
                Ваша дверь в мир восточных традиций и уникальных товаров с 2022 года
            </MudText>
            <div class="homepage-floating-elements">
                <div class="homepage-floating-element homepage-element-1">🌅</div>
                <div class="homepage-floating-element homepage-element-2">🏺</div>
                <div class="homepage-floating-element homepage-element-3">🍃</div>
                <div class="homepage-floating-element homepage-element-4">⭐</div>
            </div>
        </div>
    </div>

    <!-- Популярные категории с улучшенными анимациями -->
    <div class="homepage-section-wrapper" style="margin-top: 70px;">
        <div style="text-align: center;">
            <MudText Typo="Typo.h3" Align="Align.Center" Class="homepage-section-title gradient-text homepage-scroll-animate">
                <span class="homepage-title-emoji">🔥</span> Популярные категории
            </MudText>
        </div>

        <MudGrid Class="homepage-category-grid-enhanced mt-4" Justify="Justify.Center">
            @if (_popularCategories != null && _popularCategories.Any())
            {
                @for (int i = 0; i < _popularCategories.Count && i < 6; i++)
                {
                    var category = _popularCategories[i];
                    var delay    = i * 0.2;
                    <MudItem xs="12" sm="6" md="4" Class="homepage-category-item-wrapper">
                        <MudCard Elevation="0" Class="homepage-category-card-enhanced homepage-scroll-animate"
                                 @onclick="() => NavigateToProducts(category.Name)"
                                 Style="@($"animation-delay: {delay:0.##}s")">
                            <div class="homepage-category-image-wrapper">
                                <MudCardMedia Image="@category.ImageUrl" Class="homepage-category-card-image-enhanced"/>
                                <div class="homepage-category-overlay">
                                    <MudIcon Icon="@Icons.Material.Filled.ArrowForward" Class="homepage-category-arrow"/>
                                </div>
                                <div class="homepage-category-name-overlay">
                                    <MudText Class="homepage-category-name-text" Typo="Typo.h5">@category.Name</MudText>
                                </div>
                            </div>
                        </MudCard>
                    </MudItem>
                }
            }
        </MudGrid>
    </div>

    <!-- Наши магазины с улучшенным дизайном -->
    <div class="homepage-section-wrapper" style="margin-top: 120px">
        <div style="text-align: center;">
            <MudText Typo="Typo.h3" Align="Align.Center" Class="homepage-section-title gradient-text homepage-scroll-animate">
                <span class="homepage-title-emoji">🏪</span> Наши магазины
            </MudText>
        </div>

        <MudGrid Spacing="6" Class="homepage-shop-grid-enhanced mt-4" Justify="Justify.Center">
            @for (int i = 0; i < _shops.Count; i++)
            {
                var shop = _shops[i];
                var delay = i * 0.3;
                <MudItem xs="12" sm="12" md="6" lg="6" Class="homepage-shop-item-wrapper">
                    <MudCard Elevation="0" Class="homepage-shop-card-enhanced homepage-scroll-animate" 
                             Style="@($"animation-delay: {delay:0.##}s")">
                        <div class="homepage-shop-image-container">
                            <MudCarousel Style="height: 300px; border-radius: 15px 15px 0 0"
                                         ItemsSource="@shop.Images"
                                         BulletsColor="Color.Dark"
                                         Context="imgContext"
                                         EnableSwipeGesture="true"
                                         ShowArrows="shop.Images!.Count() > 1"
                                         ShowBullets="shop.Images!.Count() > 1"
                                         AutoCycle="true"
                                         TData="string">
                                <ItemTemplate>
                                    <MudCardMedia Image="@imgContext" Class="homepage-shop-image"></MudCardMedia>
                                </ItemTemplate>
                            </MudCarousel>
                            <div class="homepage-shop-badge">
                                <MudIcon Icon="@Icons.Material.Filled.Store" Size="Size.Small"
                                         Style="margin-right: 5px"/>
                                Магазин
                            </div>
                        </div>
                        <MudCardContent Class="homepage-shop-card-content-enhanced">
                            <div class="homepage-shop-info">
                                <MudIcon Icon="@Icons.Material.Filled.LocationOn" Class="homepage-location-icon"/>
                                <MudText Typo="Typo.body1" Class="homepage-shop-address">
                                    @(shop.Address.Length > 55 ? shop.Address.Substring(0, 55) + "..." : shop.Address)
                                </MudText>
                            </div>
                        </MudCardContent>
                    </MudCard>
                </MudItem>
            }
        </MudGrid>
    </div>

    <MudDivider Class="my-lg-5 homepage-custom-divider" DividerType="DividerType.FullWidth" Style="margin-top: 100px;"/>

    <!-- Почему выбирают нас с крутыми анимациями -->
    <div class="homepage-section-wrapper" style="margin-top: 90px;">
        <div style="text-align: center;">
            <MudText Typo="Typo.h3" Align="Align.Center" Class="homepage-section-title gradient-text homepage-scroll-animate">
                <span class="homepage-title-emoji">💎</span> Почему выбирают именно нас
            </MudText>
        </div>

        <MudGrid Class="homepage-advantages-grid" Style="margin-top: 30px" Spacing="4">
            <MudItem xs="12" sm="6" md="3" Class="homepage-advantage-item">
                <MudPaper Elevation="0" Class="homepage-advantage-enhanced homepage-advantage-1 homepage-scroll-animate">
                    <div class="homepage-advantage-icon-wrapper">
                        <MudIcon Icon="@Icons.Material.Filled.Store" Class="homepage-advantage-icon" Size="Size.Large"/>
                        <div class="homepage-icon-glow"></div>
                    </div>
                    <MudText Typo="Typo.h6" Class="homepage-advantage-title">Доступные цены</MudText>
                    <MudText Typo="Typo.body2" Class="homepage-advantage-description">
                        Всегда выгодные предложения и приятные бонусы для наших клиентов
                    </MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12" sm="6" md="3" Class="homepage-advantage-item">
                <MudPaper Elevation="0" Class="homepage-advantage-enhanced homepage-advantage-2 homepage-scroll-animate">
                    <div class="homepage-advantage-icon-wrapper">
                        <MudIcon Icon="@Icons.Material.Filled.Star" Class="homepage-advantage-icon" Size="Size.Large"/>
                        <div class="homepage-icon-glow"></div>
                    </div>
                    <MudText Typo="Typo.h6" Class="homepage-advantage-title">Высокое качество</MudText>
                    <MudText Typo="Typo.body2" Class="homepage-advantage-description">
                        Тщательно отобранные товары прямо с Востока
                    </MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12" sm="6" md="3" Class="homepage-advantage-item">
                <MudPaper Elevation="0" Class="homepage-advantage-enhanced homepage-advantage-3 homepage-scroll-animate">
                    <div class="homepage-advantage-icon-wrapper">
                        <MudIcon Icon="@Icons.Material.Filled.People" Class="homepage-advantage-icon" Size="Size.Large"/>
                        <div class="homepage-icon-glow"></div>
                    </div>
                    <MudText Typo="Typo.h6" Class="homepage-advantage-title">1100+ клиентов</MudText>
                    <MudText Typo="Typo.body2" Class="homepage-advantage-description">
                        Нам доверяют более тысячи довольных покупателей
                    </MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12" sm="6" md="3" Class="homepage-advantage-item">
                <MudPaper Elevation="0" Class="homepage-advantage-enhanced homepage-advantage-4 homepage-scroll-animate">
                    <div class="homepage-advantage-icon-wrapper">
                        <MudIcon Icon="@Icons.Material.Filled.ShoppingCart" Class="homepage-advantage-icon" Size="Size.Large"/>
                        <div class="homepage-icon-glow"></div>
                    </div>
                    <MudText Typo="Typo.h6" Class="homepage-advantage-title">Широкий ассортимент</MudText>
                    <MudText Typo="Typo.body2" Class="homepage-advantage-description">
                        Более 500 уникальных товаров восточной культуры
                    </MudText>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </div>

    <!-- Новая секция с товарами -->
    <div class="homepage-products-preview-section" style="margin-top: 130px; margin-bottom: 10px;">
        <div style="text-align: center;">
            <MudText Typo="Typo.h3" Align="Align.Center" Class="homepage-section-title gradient-text homepage-scroll-animate">
                <span class="homepage-title-emoji">🎁</span> Что мы предлагаем
            </MudText>
        </div>
    </div>
</MudContainer>

<!-- Кинематографическая карусель на весь экран -->
<div class="homepage-full-width-carousel-wrapper">
    <div class="homepage-carousel-wrapper">
        <div class="homepage-products-carousel" id="productsCarousel">
            <div class="homepage-carousel-track">
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🗡️</div>
                    <h4>Ножи и клинки</h4>
                    <p>Изысканные коллекции для ценителей</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🍯</div>
                    <h4>Казаны</h4>
                    <p>Для настоящих кулинарных шедевров</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🥜</div>
                    <h4>Сухофрукты и орехи</h4>
                    <p>Натуральные и полезные лакомства</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🍵</div>
                    <h4>Чай и напитки</h4>
                    <p>Отборные сорта для гурманов</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🏺</div>
                    <h4>Восточная посуда</h4>
                    <p>Изысканные сервизы и чайники</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🍬</div>
                    <h4>Сладости</h4>
                    <p>Традиционные восточные деликатесы</p>
                </MudPaper>
                <!-- Дублируем для бесшовности -->
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🗡️</div>
                    <h4>Ножи и клинки</h4>
                    <p>Изысканные коллекции для ценителей</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🍯</div>
                    <h4>Казаны</h4>
                    <p>Для настоящих кулинарных шедевров</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🥜</div>
                    <h4>Сухофрукты и орехи</h4>
                    <p>Натуральные и полезные лакомства</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🍵</div>
                    <h4>Чай и напитки</h4>
                    <p>Отборные сорта для гурманов</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🏺</div>
                    <h4>Восточная посуда</h4>
                    <p>Изысканные сервизы и чайники</p>
                </MudPaper>
                <MudPaper Elevation="0" Class="homepage-product-category-preview">
                    <div class="homepage-product-icon">🍬</div>
                    <h4>Сладости</h4>
                    <p>Традиционные восточные деликатесы</p>
                </MudPaper>
            </div>
        </div>
    </div>
</div>

@code {

    private List<string> Slides = new()
    {
        "/Media/HomeSlides/1.jpg",
        "/Media/HomeSlides/2.jpg",
        "/Media/HomeSlides/3.jpg",
        "/Media/HomeSlides/4.jpg",
        "/Media/HomeSlides/5.jpg",
        "/Media/HomeSlides/6.jpg",
        "/Media/HomeSlides/7.jpg"
    };

    private List<ProductCategoryResponse>? _popularCategories = new();
    private List<ShopVm> _shops = new();
    
    private bool _scrollAnimationsInitialized = false;
    private bool _dataLoaded = false;

    protected override async Task OnInitializedAsync()
    {
        _popularCategories = new();
        _popularCategories = ((await CategoryService.Get())!).Take(6).ToList();

        _shops = await ShopService.GetShopsVmAsync();
        _dataLoaded = true;
    }

    private void NavigateToProducts(string categorySlug)
    {
        Navigation.NavigateTo($"/products?category={categorySlug}");
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("initializeProductCarousel");
        }

        if (_dataLoaded && !_scrollAnimationsInitialized)
        {
            await JS.InvokeVoidAsync("initializeScrollAnimations");
            _scrollAnimationsInitialized = true;
        }
    }
}

<style>
    /* Базовые стили для HTML и body - устанавливает размеры и убирает отступы */
    html, body {
        margin: 0; /* Убирает стандартные отступы браузера */
        padding: 0; /* Убирает стандартные внутренние отступы */
        height: 100%; /* Устанавливает высоту на весь экран */
        width: 100%; /* Устанавливает ширину на весь экран */
    }

    /* Главная карусель - контейнер для полноэкранной карусели */
    .homepage-full-width-carousel-container {
        width: calc(100% + 32px); /* Расширяет контейнер за пределы стандартных отступов */
        margin-left: -16px; /* Компенсирует левый отступ */
        margin-right: -16px; /* Компенсирует правый отступ */
    }

    /* Стили баннера карусели */
    .homepage-carousel-banner {
        height: 100vh; /* Высота на весь viewport */
        width: 100%; /* Ширина на весь контейнер */
        margin-right: 0; /* Убирает правый отступ */
        display: flex; /* Включает flexbox для центрирования */
        justify-content: center; /* Центрирует содержимое по горизонтали */
        position: relative; /* Позволяет позиционировать дочерние элементы */
        overflow: hidden; /* Скрывает содержимое за пределами контейнера */
    }

    /* Изображение в карусели */
    .homepage-carousel-image {
        width: 100%; /* Занимает всю ширину контейнера */
        height: 100vh; /* Высота на весь viewport */
    }

    /* Секция приветствия */
    .homepage-welcome-section {
        position: relative; /* Для позиционирования плавающих элементов */
        padding: 60px 20px; /* Внутренние отступы сверху/снизу и слева/справа */
        text-align: center; /* Центрирует текст */
        overflow: hidden; /* Скрывает плавающие элементы за границами */
    }

    /* Контент приветствия */
    .homepage-welcome-content {
        position: relative; /* Создает контекст позиционирования */
        z-index: 2; /* Поднимает контент над плавающими элементами */
    }

    /* Заголовок приветствия */
    .homepage-welcome-title {
        font-weight: 700; /* Жирный шрифт */
        margin-bottom: 20px; /* Отступ снизу */
        position: relative; /* Для позиционирования */
    }

    /* Градиентный текст - применяется ко всем заголовкам */
    .gradient-text {
        background: linear-gradient(45deg, #FF6600, #FFCC00);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }



    /* Подзаголовок приветствия */
    .homepage-welcome-subtitle {
        font-weight: 300; /* Тонкий шрифт */
        line-height: 1.6; /* Межстрочный интервал */
    }

    /* Контейнер плавающих элементов */
    .homepage-floating-elements {
        position: absolute; /* Абсолютное позиционирование */
        top: 0; /* Прикрепляет к верху */
        left: 0; /* Прикрепляет к левому краю */
        width: 100%; /* Занимает всю ширину */
        height: 100%; /* Занимает всю высоту */
        pointer-events: none; /* Игнорирует клики мыши */
        z-index: 1; /* Помещает под основной контент */
    }

    /* Плавающие элементы (эмодзи) */
    .homepage-floating-element {
        position: absolute; /* Абсолютное позиционирование */
        font-size: 2rem; /* Размер эмодзи */
        opacity: 0.3; /* Полупрозрачность */
        animation: homepageFloat 6s ease-in-out infinite; /* Анимация плавания */
    }

    /* Позиции для каждого плавающего элемента */
    .homepage-element-1 {
        top: 20%; /* Позиция сверху */
        left: 10%; /* Позиция слева */
        animation-delay: 0s; /* Без задержки */
    }

    .homepage-element-2 {
        top: 60%; /* Позиция сверху */
        right: 15%; /* Позиция справа */
        animation-delay: 1.5s; /* Задержка анимации */
    }

    .homepage-element-3 {
        top: 30%; /* Позиция сверху */
        right: 25%; /* Позиция справа */
        animation-delay: 3s; /* Задержка анимации */
    }

    .homepage-element-4 {
        bottom: 20%; /* Позиция снизу */
        left: 20%; /* Позиция слева */
        animation-delay: 4.5s; /* Задержка анимации */
    }

    /* Анимация плавания для эмодзи */
    @@keyframes homepageFloat {
        0%, 100% {
            transform: translateY(0px) rotate(0deg); /* Начальное и конечное положение */
        }
        33% {
            transform: translateY(-20px) rotate(120deg); /* Поднимается и поворачивается */
        }
        66% {
            transform: translateY(10px) rotate(240deg); /* Опускается и поворачивается */
        }
    }

    /* Общий контейнер для секций */
    .homepage-section-wrapper {
        position: relative; /* Для позиционирования */
        padding: 0; /* Вертикальные отступы */
    }

    /* Стили для заголовков секций */
    .homepage-section-title {
        font-weight: 700; /* Жирный шрифт */
        position: relative; /* Для позиционирования */
        margin-bottom: 30px; /* Увеличенный отступ снизу до карточек */
        font-size: 2.5rem; /* Размер шрифта */
        display: inline-flex; /* Inline-flex для центрирования с эмодзи */
        align-items: center; /* Выравнивание по вертикали */
        gap: 10px; /* Промежуток между текстом и эмодзи */
    }

    /* Анимированные эмодзи в заголовках */
    .homepage-title-emoji {
        display: inline-block; /* Блочный элемент в строке */
        animation: homepageTitleEmojiPulse 2s ease-in-out infinite; /* Анимация пульсации */
    }

    /* Анимация пульсации для эмодзи в заголовках */
    @@keyframes homepageTitleEmojiPulse {
        0%, 100% { 
            transform: scale(1) rotate(0deg); /* Обычный размер */
        }
        50% { 
            transform: scale(1.2) rotate(10deg); /* Увеличение и поворот */
        }
    }

    /* Сетка категорий */
    .homepage-category-grid-enhanced {
        margin-top: 60px; /* Отступ сверху */
        margin-bottom: 50px; /* Отступ снизу */
        max-width: 1200px; /* Максимальная ширина */
        margin-left: auto; /* Центрирование по горизонтали */
        margin-right: auto; /* Центрирование по горизонтали */
    }

    /* Обертка для элемента категории */
    .homepage-category-item-wrapper {
        display: flex; /* Flexbox для центрирования */
        justify-content: center; /* Центрирование по горизонтали */
    }

    /* Карточка категории */
    .homepage-category-card-enhanced {
        width: 100%; /* Занимает всю ширину контейнера */
        max-width: 380px; /* Максимальная ширина */
        height: 280px; /* Уменьшенная высота для прямоугольной формы */
        cursor: pointer; /* Курсор-указатель при наведении */
        border-radius: 20px; /* Скругленные углы */
        overflow: hidden; /* Скрывает содержимое за границами */
        position: relative; /* Для позиционирования внутренних элементов */
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Плавная анимация */
        opacity: 0; /* Изначально невидима для анимации появления */
        transform: translateY(50px); /* Смещена вниз для анимации */
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15); /* Тень карточки */
        border: 2px solid transparent; /* Прозрачная граница */
    }

    /* Эффекты при наведении на карточку категории */
    .homepage-category-card-enhanced:hover {
        transform: translateY(-10px) scale(1.02); /* Поднимается и увеличивается */
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2); /* Усиливается тень */
        border-color: #019934; /* Зеленая обводка */
    }

    /* Контейнер изображения категории */
    .homepage-category-image-wrapper {
        position: relative; /* Для позиционирования оверлеев */
        height: 100%; /* Занимает всю высоту карточки */
        overflow: hidden; /* Скрывает части изображения за границами */
    }

    /* Изображение категории */
    .homepage-category-card-image-enhanced {
        width: 100%; /* Занимает всю ширину */
        height: 100%; /* Занимает всю высоту */
        object-fit: cover; /* Обрезает изображение сохраняя пропорции */
        transition: transform 0.4s ease; /* Плавная анимация */
    }

    /* Увеличение изображения при наведении */
    .homepage-category-card-enhanced:hover .homepage-category-card-image-enhanced {
        transform: scale(1.1); /* Увеличение на 10% */
    }

    /* Оверлей со стрелкой (появляется при наведении) */
    .homepage-category-overlay {
        position: absolute; /* Абсолютное позиционирование */
        top: 50%; /* Центр по вертикали */
        left: 50%; /* Центр по горизонтали */
        transform: translate(-50%, -50%); /* Точное центрирование */
        opacity: 0; /* Изначально невидим */
        transition: opacity 0.3s ease; /* Плавное появление */
        background: rgba(0, 0, 0, 0.7); /* Темный полупрозрачный фон */
        border-radius: 50%; /* Круглая форма */
        padding: 15px; /* Внутренний отступ */
    }

    /* Показ оверлея при наведении */
    .homepage-category-card-enhanced:hover .homepage-category-overlay {
        opacity: 1; /* Становится видимым */
    }

    /* Стрелка в оверлее */
    .homepage-category-arrow {
        color: white; /* Белый цвет */
        font-size: 24px; /* Размер иконки */
    }

    /* Оверлей с названием категории */
    .homepage-category-name-overlay {
        position: absolute; /* Абсолютное позиционирование */
        bottom: 35%; /* Позиция снизу (по центру карточки) */
        left: 0; /* Прикреплен к левому краю */
        right: 0; /* Прикреплен к правому краю */
        background: rgba(0, 0, 0, 0.6); /* Полупрозрачный темный фон */
        padding: 10px 15px; /* Уменьшенные отступы для узкой полоски */
        display: flex; /* Flexbox для центрирования */
        align-items: center; /* Центрирование по вертикали */
        justify-content: center; /* Центрирование по горизонтали */
        transition: all 0.3s ease; /* Плавная анимация */
    }

    /* Текст названия категории */
    .homepage-category-name-text {
        font-weight: 500; /* Средняя жирность (не слишком жирный) */
        color: white; /* Белый цвет */
        text-align: center; /* Центрирование текста */
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); /* Тень текста */
        font-size: 1.3rem; /* Размер шрифта */
    }

    /* Скрытие названия при наведении */
    .homepage-category-card-enhanced:hover .homepage-category-name-overlay {
        opacity: 0; /* Становится невидимым */
        transform: translateY(20px); /* Смещается вниз */
    }

    /* Сетка магазинов */
    .homepage-shop-grid-enhanced {
        margin-top: 60px; /* Отступ сверху */
        margin-bottom: 50px; /* Отступ снизу */
    }

    /* Обертка элемента магазина */
    .homepage-shop-item-wrapper {
        display: flex; /* Flexbox для центрирования */
        justify-content: center; /* Центрирование по горизонтали */
    }

    /* Карточка магазина */
    .homepage-shop-card-enhanced {
        width: 100%; /* Занимает всю ширину контейнера */
        height: 360px; /* Фиксированная высота */
        border-radius: 20px; /* Скругленные углы */
        overflow: hidden; /* Скрывает содержимое за границами */
        position: relative; /* Для позиционирования внутренних элементов */
        transition: all 0.4s ease; /* Плавная анимация */
        opacity: 0; /* Изначально невидима для анимации */
        transform: translateY(50px); /* Смещена вниз для анимации */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Тень карточки */
        border: 2px solid transparent; /* Прозрачная граница */
    }

    /* Эффекты при наведении на карточку магазина */
    .homepage-shop-card-enhanced:hover {
        transform: translateY(-8px) rotateX(5deg); /* Поднимается и наклоняется */
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2); /* Усиливается тень */
        border-color: #019934; /* Зеленая обводка */
    }

    /* Контейнер изображения магазина */
    .homepage-shop-image-container {
        position: relative; /* Для позиционирования бейджа */
        height: 300px; /* Фиксированная высота */
        overflow: hidden; /* Скрывает части изображения */
    }

    /* Изображение магазина */
    .homepage-shop-image {
        width: 100%; /* Занимает всю ширину */
        height: 100%; /* Занимает всю высоту */
        object-fit: cover; /* Обрезает сохраняя пропорции */
        transition: transform 0.6s ease; /* Плавная анимация */
    }

    /* Увеличение и поворот изображения при наведении */
    .homepage-shop-card-enhanced:hover .homepage-shop-image {
        transform: scale(1.1) rotate(2deg); /* Увеличение и легкий поворот */
    }

    /* Бейдж "Магазин" */
    .homepage-shop-badge {
        position: absolute; /* Абсолютное позиционирование */
        top: 15px; /* Отступ сверху */
        right: 15px; /* Отступ справа */
        background: rgba(0, 0, 0, 0.8); /* Темный полупрозрачный фон */
        color: white; /* Белый текст */
        padding: 8px 12px; /* Внутренние отступы */
        border-radius: 20px; /* Скругленные углы */
        font-size: 0.85rem; /* Размер шрифта */
        display: flex; /* Flexbox для выравнивания */
        align-items: center; /* Центрирование по вертикали */
        transition: all 0.3s ease; /* Плавная анимация */
    }

    /* Анимация бейджа при наведении */
    .homepage-shop-card-enhanced:hover .homepage-shop-badge {
        transform: translateY(-5px); /* Поднимается вверх */
        background: #019934; /* Меняет цвет на зеленый */
    }

    /* Контент карточки магазина */
    .homepage-shop-card-content-enhanced {
        padding: 15px 20px; /* Внутренние отступы */
        height: 60px; /* Фиксированная высота */
        display: flex; /* Flexbox для выравнивания */
        align-items: center; /* Центрирование по вертикали */
        transition: all 0.3s ease; /* Плавная анимация */
    }

    /* Информация о магазине */
    .homepage-shop-info {
        display: flex; /* Flexbox для выравнивания */
        align-items: center; /* Центрирование по вертикали */
        width: 100%; /* Занимает всю ширину */
    }

    /* Иконка локации */
    .homepage-location-icon {
        color: #019934; /* Зеленый цвет */
        margin-right: 10px; /* Отступ справа */
        font-size: 20px; /* Размер иконки */
        transition: all 0.3s ease; /* Плавная анимация */
    }

    /* Анимация иконки при наведении */
    .homepage-shop-card-enhanced:hover .homepage-location-icon {
        transform: scale(1.2) rotate(15deg); /* Увеличение и поворот */
    }

    /* Адрес магазина */
    .homepage-shop-address {
        flex: 1; /* Занимает оставшееся пространство */
        font-weight: 500; /* Средняя жирность */
        line-height: 1.3; /* Межстрочный интервал */
    }

    /* Сетка преимуществ */
    .homepage-advantages-grid .homepage-advantage-item {
        display: flex; /* Flexbox для центрирования */
        justify-content: center; /* Центрирование по горизонтали */
    }

    /* Карточка преимущества */
    .homepage-advantage-enhanced {
        padding: 40px 20px; /* Внутренние отступы */
        text-align: center; /* Центрирование текста */
        border-radius: 20px; /* Скругленные углы */
        position: relative; /* Для позиционирования эффектов */
        overflow: hidden; /* Скрывает эффекты за границами */
        transition: all 0.4s ease; /* Плавная анимация */
        opacity: 0; /* Изначально невидима */
        transform: translateY(50px); /* Смещена вниз */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); /* Легкая тень */
        border: 2px solid transparent; /* Прозрачная граница */
        height: 280px; /* Фиксированная высота */
        display: flex; /* Flexbox для вертикального центрирования */
        flex-direction: column; /* Вертикальное расположение */
        justify-content: center; /* Центрирование содержимого */
    }

    /* Эффекты при наведении на преимущество */
    .homepage-advantage-enhanced:hover {
        transform: translateY(-10px); /* Поднимается вверх */
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15); /* Усиливается тень */
        border-color: #019934; /* Зеленая обводка */
    }

    /* Контейнер иконки преимущества */
    .homepage-advantage-icon-wrapper {
        position: relative; /* Для позиционирования свечения */
        display: inline-block; /* Блочный элемент в строке */
        margin-bottom: 25px; /* Отступ снизу */
    }

    /* Иконка преимущества */
    .homepage-advantage-icon {
        color: #FF6600; /* Оранжевый цвет */
        font-size: 3rem !important; /* Большой размер */
        position: relative; /* Для z-index */
        z-index: 2; /* Поверх свечения */
    }

    /* Свечение вокруг иконки */
    .homepage-icon-glow {
        position: absolute; /* Абсолютное позиционирование */
        top: 50%; /* Центр по вертикали */
        left: 50%; /* Центр по горизонтали */
        transform: translate(-50%, -50%); /* Точное центрирование */
        width: 80px; /* Ширина свечения */
        height: 80px; /* Высота свечения */
        background: radial-gradient(circle, rgba(255, 102, 0, 0.2) 0%, transparent 70%); /* Градиентное свечение */
        border-radius: 50%; /* Круглая форма */
        animation: homepageGlow 2s ease-in-out infinite alternate; /* Анимация пульсации */
    }

    /* Заголовок преимущества */
    .homepage-advantage-title {
        font-weight: 600; /* Полужирный */
        margin-bottom: 15px; /* Отступ снизу */
    }

    /* Описание преимущества */
    .homepage-advantage-description {
        opacity: 0.8; /* Слегка прозрачный */
        line-height: 1.5; /* Межстрочный интервал */
        max-width: 200px; /* Максимальная ширина */
        margin: 0 auto; /* Центрирование */
    }

    /* Контейнер кинематографической карусели - исправлен для устранения горизонтального скролла */
    .homepage-full-width-carousel-wrapper {
        width: 100%; /* Изменено с 100vw на 100% */
        position: relative; /* Для позиционирования */
        overflow: hidden; /* Скрывает края карусели */
        margin-top: -50px; /* Отрицательный отступ сверху */
        padding: 40px 0; /* Вертикальные отступы */
    }

    /* Обертка карусели */
    .homepage-carousel-wrapper {
        width: 100%; /* Занимает всю ширину */
        overflow: hidden; /* Скрывает лишнее */
        position: relative; /* Для позиционирования */
    }

    /* Контейнер карусели товаров */
    .homepage-products-carousel {
        position: relative; /* Для позиционирования трека */
        width: 100%; /* Занимает всю ширину */
        height: 320px; /* Фиксированная высота */
        display: flex; /* Flexbox для выравнивания */
        align-items: center; /* Центрирование по вертикали */
    }

    /* Трек карусели с элементами */
    .homepage-carousel-track {
        display: flex; /* Flexbox для горизонтального расположения */
        gap: 30px; /* Промежуток между элементами */
        animation: homepageScrollRight 50s linear infinite; /* Бесконечная анимация прокрутки */
        position: absolute; /* Абсолютное позиционирование */
        left: 0; /* Начинает с левого края */
    }

    /* Анимация прокрутки вправо - исправлена для бесконечности */
    @@keyframes homepageScrollRight {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(0); }
    }

    /* Карточка товара в карусели */
    .homepage-product-category-preview {
        min-width: 300px; /* Минимальная ширина */
        text-align: center; /* Центрирование текста */
        padding: 40px 20px; /* Внутренние отступы */
        border-radius: 20px; /* Скругленные углы */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); /* Легкая тень */
        transition: all 0.4s ease; /* Плавная анимация */
        border: 2px solid transparent; /* Прозрачная граница */
        position: relative; /* Для позиционирования эффектов */
        overflow: hidden; /* Скрывает эффекты за границами */
    }

    /* Эффекты при наведении на карточку товара */
    .homepage-product-category-preview:hover {
        transform: translateY(-8px) scale(1.05); /* Поднимается и увеличивается */
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); /* Усиливается тень */
        border-color: #019934; /* Зеленая обводка */
    }

    /* Эффект оранжевой волны для карточек товаров */
    .homepage-product-category-preview::before {
        content: ''; /* Пустой контент для псевдоэлемента */
        position: absolute; /* Абсолютное позиционирование */
        top: 0; /* Прикреплен к верху */
        left: -100%; /* Начинает за левой границей */
        width: 100%; /* Ширина волны */
        height: 100%; /* Высота волны */
        background: linear-gradient(90deg, transparent, rgba(255, 102, 0, 0.1), transparent); /* Оранжевая волна */
        transition: left 0.8s ease; /* Плавное движение */
    }

    /* Движение волны при наведении */
    .homepage-product-category-preview:hover::before {
        left: 100%; /* Проходит через всю карточку */
    }

    /* Иконка товара */
    .homepage-product-icon {
        font-size: 3rem; /* Большой размер */
        margin-bottom: 20px; /* Отступ снизу */
        display: block; /* Блочный элемент */
        animation: homepageProductIconFloat 3s ease-in-out infinite; /* Анимация плавания */
    }

    /* Разная задержка для четных/нечетных иконок */
    .homepage-product-category-preview:nth-child(odd) .homepage-product-icon {
        animation-delay: 0.5s; /* Задержка для нечетных */
    }

    .homepage-product-category-preview:nth-child(even) .homepage-product-icon {
        animation-delay: 1s; /* Задержка для четных */
    }

    /* Анимация плавания иконок товаров */
    @@keyframes homepageProductIconFloat {
        0%, 100% { 
            transform: translateY(0); /* Исходное положение */
        }
        50% { 
            transform: translateY(-5px); /* Поднимается на 5px */
        }
    }

    /* Заголовок карточки товара */
    .homepage-product-category-preview h4 {
        margin: 0 0 15px 0; /* Отступы: нет сверху, 15px снизу */
        font-weight: 600; /* Полужирный */
    }

    /* Описание карточки товара */
    .homepage-product-category-preview p {
        margin: 0; /* Убирает стандартные отступы */
        opacity: 0.8; /* Слегка прозрачный */
        line-height: 1.5; /* Межстрочный интервал */
    }

    /* Анимация появления элементов снизу вверх */
    @@keyframes homepageFadeInUp {
        from {
            opacity: 0; /* Начинает невидимым */
            transform: translateY(50px); /* Смещен вниз на 50px */
        }
        to {
            opacity: 1; /* Становится видимым */
            transform: translateY(0); /* Возвращается на место */
        }
    }

    /* Анимация простого появления */
    @@keyframes homepageFadeIn {
        from {
            opacity: 0; /* Начинает невидимым */
            transform: translateY(20px); /* Небольшое смещение вниз */
        }
        to {
            opacity: 1; /* Становится видимым */
            transform: translateY(0); /* Возвращается на место */
        }
    }

    /* Анимация свечения иконок */
    @@keyframes homepageGlow {
        from {
            opacity: 0.5; /* Полупрозрачное свечение */
            transform: translate(-50%, -50%) scale(1); /* Обычный размер */
        }
        to {
            opacity: 0.8; /* Более яркое свечение */
            transform: translate(-50%, -50%) scale(1.2); /* Увеличение на 20% */
        }
    }

    /* Класс для анимации появления */
    .homepage-fade-in {
        animation: homepageFadeIn 1s ease-in-out; /* Применяет анимацию появления */
    }

    /* Класс для анимации появления снизу */
    .homepage-fade-in-up {
        animation: homepageFadeInUp 0.8s ease-out forwards; /* Анимация с сохранением конечного состояния */
        opacity: 0; /* Изначально невидим */
        transform: translateY(50px); /* Изначально смещен вниз */
    }

    /* Анимированный контент */
    .homepage-animated-content {
        animation: homepageFadeIn 1.5s ease-in-out; /* Плавное появление всего контента */
    }

    /* Кастомный разделитель */
    .homepage-custom-divider {
        background: linear-gradient(90deg, transparent, #FF6600, transparent); /* Градиентная линия */
        height: 2px; /* Высота линии */
        border: none; /* Убирает стандартную границу */
    }

    /* Эффект оранжевой волны для преимуществ */
    .homepage-advantage-enhanced::before {
        content: ''; /* Пустой контент для псевдоэлемента */
        position: absolute; /* Абсолютное позиционирование */
        top: 0; /* Прикреплен к верху */
        left: -100%; /* Начинает за левой границей */
        width: 100%; /* Ширина волны */
        height: 100%; /* Высота волны */
        background: linear-gradient(90deg, transparent, rgba(255, 102, 0, 0.1), transparent); /* Оранжевая волна */
        transition: left 0.8s ease; /* Плавное движение */
    }

    /* Движение волны при наведении на преимущество */
    .homepage-advantage-enhanced:hover::before {
        left: 100%; /* Проходит через всю карточку */
    }

    /* Эффект градиента для категорий */
    .homepage-category-card-enhanced::after {
        content: ''; /* Пустой контент для псевдоэлемента */
        position: absolute; /* Абсолютное позиционирование */
        top: 0; /* Прикреплен к верху */
        left: 0; /* Прикреплен к левому краю */
        right: 0; /* Прикреплен к правому краю */
        bottom: 0; /* Прикреплен к низу */
        background: linear-gradient(135deg, transparent 40%, rgba(255, 102, 0, 0.1) 50%, transparent 60%); /* Диагональный градиент */
        opacity: 0; /* Изначально невидим */
        transition: opacity 0.3s ease; /* Плавное появление */
    }

    /* Показ градиента при наведении на категорию */
    .homepage-category-card-enhanced:hover::after {
        opacity: 1; /* Становится видимым */
    }

    /* Микро-анимации для MudBlazor компонентов */
    .mud-button, .mud-card, .mud-paper {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Плавные переходы с кривой Безье */
    }

    /* Стили для стрелок карусели MudBlazor */
    .mud-carousel .mud-carousel-arrows {
        position: absolute; /* Абсолютное позиционирование */
        top: 50%; /* Центр по вертикали */
        transform: translateY(-50%); /* Точное центрирование */
        width: 100%; /* Занимает всю ширину */
        display: flex; /* Flexbox для расположения */
        justify-content: space-between; /* Стрелки по краям */
    }

    /* Индикаторы карусели MudBlazor */
    .mud-carousel .mud-carousel-indicators {
        position: absolute; /* Абсолютное позиционирование */
        top: 10px; /* Отступ сверху */
        width: 100%; /* Занимает всю ширину */
        text-align: center; /* Центрирование индикаторов */
    }

    /* Отдельные индикаторы карусели */
    .mud-carousel .mud-carousel-indicators .mud-carousel-indicator {
        margin: 0 5px; /* Горизонтальные отступы */
        background-color: rgba(255, 255, 255, 0.7); /* Полупрозрачный белый */
    }

    /* Задержки анимации для последовательного появления преимуществ */
    .homepage-advantage-1 {
        animation-delay: 0.1s; /* Первое преимущество */
    }

    .homepage-advantage-2 {
        animation-delay: 0.3s; /* Второе преимущество */
    }

    .homepage-advantage-3 {
        animation-delay: 0.5s; /* Третье преимущество */
    }

    .homepage-advantage-4 {
        animation-delay: 0.7s; /* Четвертое преимущество */
    }

    /* Сброс box-sizing для всех элементов */
    * {
        box-sizing: border-box; /* Включает padding и border в общую ширину/высоту */
    }

    /* Стандартные отступы для MudContainer */
    .mud-container {
        padding-left: 16px; /* Левый отступ */
        padding-right: 16px; /* Правый отступ */
    }

    /* Плавные переходы для интерактивных элементов */
    a, button, .mud-card, .mud-paper, .mud-button-root {
        transition: all 0.2s ease-in-out; /* Быстрые плавные переходы */
    }

    /* Оптимизация производительности для анимированных элементов */
    .homepage-category-card-enhanced,
    .homepage-shop-card-enhanced,
    .homepage-advantage-enhanced,
    .homepage-product-category-preview {
        will-change: transform; /* Подсказка браузеру об изменении transform */
        backface-visibility: hidden; /* Отключает отрисовку обратной стороны */
        transform: translateZ(0); /* Включает аппаратное ускорение */
    }

    /* Класс для наблюдателя скролла */
    .homepage-scroll-animate {
        opacity: 0; /* Изначально невидим */
        transform: translateY(50px); /* Изначально смещен вниз */
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    /* Активное состояние после появления в viewport */
    .homepage-scroll-animate.homepage-in-view {
        opacity: 1; /* Становится видимым */
        transform: translateY(0); /* Возвращается на место */
    }

    /* Адаптивность для планшетов */
    @@media (max-width: 960px) {
        .homepage-welcome-title {
            font-size: 2.5rem; /* Уменьшенный размер заголовка */
        }

        .homepage-section-title {
            font-size: 2rem; /* Уменьшенный размер заголовков секций */
        }

        .homepage-floating-element {
            font-size: 1.5rem; /* Уменьшенные эмодзи */
        }

        .homepage-category-card-enhanced {
            max-width: 340px; /* Уменьшенная максимальная ширина */
            height: 260px; /* Уменьшенная высота */
        }

        .homepage-advantage-enhanced {
            height: auto; /* Автоматическая высота */
            min-height: 250px; /* Минимальная высота */
        }

        .homepage-product-category-preview {
            min-width: 250px; /* Уменьшенная минимальная ширина */
        }
    }

    /* Адаптивность для мобильных устройств */
    @@media (max-width: 600px) {
        .homepage-welcome-section {
            padding: 40px 10px; /* Уменьшенные отступы */
        }

        .homepage-welcome-title {
            font-size: 2rem; /* Еще меньше заголовок */
        }

        .homepage-section-title {
            font-size: 1.75rem; /* Еще меньше заголовки секций */
            margin-bottom: 60px; /* Уменьшенный отступ снизу */
        }

        .homepage-title-emoji {
            font-size: 1.5rem; /* Уменьшенные эмодзи в заголовках */
        }

        .homepage-category-card-enhanced {
            max-width: 300px; /* Еще меньше максимальная ширина */
            height: 240px; /* Еще меньше высота */
        }

        .homepage-category-name-text {
            font-size: 1.1rem; /* Уменьшенный размер текста названия */
        }

        .homepage-shop-card-enhanced {
            height: 340px; /* Уменьшенная высота магазина */
        }

        .homepage-shop-image-container {
            height: 280px; /* Уменьшенная высота изображения */
        }

        .homepage-shop-card-content-enhanced {
            height: 60px; /* Сохраняем высоту */
            padding: 10px 15px; /* Уменьшенные отступы */
        }

        .homepage-advantage-enhanced {
            padding: 30px 15px; /* Уменьшенные отступы */
            min-height: 220px; /* Уменьшенная минимальная высота */
        }

        .homepage-product-category-preview {
            min-width: 220px; /* Уменьшенная минимальная ширина */
            padding: 30px 15px; /* Уменьшенные отступы */
        }

        .homepage-product-icon {
            font-size: 2.5rem; /* Уменьшенные иконки товаров */
        }

        .homepage-floating-elements {
            display: none; /* Скрываем плавающие элементы на мобильных */
        }
    }

</style>